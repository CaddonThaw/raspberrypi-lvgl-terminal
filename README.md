# LVGL OpenCV 嵌入式图形界面项目

这是一个基于LVGL嵌入式GUI框架和OpenCV计算机视觉库的综合项目，适用于嵌入式Linux平台。项目集成了多种设备功能，包括摄像头、WiFi、电源管理和传感器等。

## 功能特性

- **LVGL图形界面**：使用LVGL库构建的嵌入式GUI界面
- **OpenCV集成**：实时摄像头视频流处理与物体检测
- **WiFi管理**：WiFi网络扫描、连接及状态管理
- **传感器支持**：TM7711模数转换器支持
- **电源管理**：关机和重启功能
- **时间显示**：实时日期和时间显示
- **多线程架构**：各功能模块采用独立线程运行

## 硬件要求

- 支持Linux的嵌入式平台
- ILI9341显示屏驱动
- XPT2046触摸屏控制器
- USB摄像头
- TM7711 ADC芯片
- WiFi适配器
- WiringPi兼容GPIO接口

## 软件依赖

- LVGL (Light and Versatile Graphics Library)
- OpenCV 4.x
- WiringPi
- Linux系统工具链

## 编译和运行

### 编译

```bash
make
```

### 运行

```bash
sudo ./demo
```

> 注意：由于涉及硬件访问，通常需要root权限

## 项目结构

```
LVGL_OpenCV/
├── lvgl/                # LVGL图形库
├── lv_drivers/          # LVGL显示和输入设备驱动
├── ui/                  # 图形界面定义
├── devices/             # 设备驱动模块
│   ├── opencv/          # OpenCV摄像头处理
│   ├── wifi/            # WiFi网络管理
│   ├── power/           # 电源管理
│   ├── tm7711/          # TM7711 ADC驱动
│   └── threads/         # 多线程管理
├── main.cpp             # 主程序入口
└── Makefile             # 构建脚本
```

## 功能模块说明

### OpenCV模块
- 实时摄像头视频捕获
- 红色物体检测与跟踪
- 视频帧处理与显示

### WiFi模块
- 附近WiFi网络扫描
- WiFi连接管理
- IP地址获取与显示

### 电源管理模块
- 系统安全关机
- 系统重启功能

### 时间模块
- 实时时间显示
- 日期信息展示

### 传感器模块 (TM7711)
- ADC数据采集
- 传感器信号处理

## 界面导航

- **主界面**：包含OpenCV、设置、消息和电源按钮
- **OpenCV界面**：显示摄像头捕获的画面及物体检测结果
- **设置界面**：WiFi配置和网络设置
- **消息界面**：传感器数据和其他信息显示
- **电源界面**：关机和重启选项

## 自定义扩展

此项目设计为模块化架构，可以轻松添加新的设备驱动或功能模块：

1. 在`devices/`目录下创建新模块
2. 实现相应的初始化和处理函数
3. 在主线程中启动该模块的线程
4. 如需要，更新UI以反映新功能

## 故障排除

如果遇到编译错误，请检查：
- OpenCV是否正确安装
- WiringPi库是否可用
- 是否具有访问硬件设备的权限

如遇运行时问题：
- 确保硬件设备已正确连接
- 检查设备权限
- 确认内核支持所需设备驱动

## 许可证

本项目基于LVGL的MIT许可证，可在商业和开源项目中自由使用。